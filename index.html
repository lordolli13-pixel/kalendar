<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pl√°novaƒç 2026</title>
    <style>
        :root { --primary: #007BFF; --3d-shadow: rgba(0, 0, 0, 0.2); --today-border: #0056b3; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f7f9; margin: 0; padding: 20px; user-select: none; display: flex; flex-direction: column; align-items: center; }
        
        .controls-panel { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin-bottom: 20px; width: 100%; max-width: 1000px; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 20px; border-bottom: 5px solid var(--primary); }
        .nav-section { display: flex; align-items: center; gap: 15px; }
        .display-label { font-size: 1.5em; font-weight: 800; min-width: 200px; text-align: center; }
        
        .tools { display: flex; gap: 15px; }
        .tool { display: flex; flex-direction: column; align-items: center; cursor: pointer; font-size: 0.85em; font-weight: bold; opacity: 0.4; transition: 0.2s; }
        .tool.active { opacity: 1; transform: translateY(-3px); }
        .dot { width: 35px; height: 35px; border-radius: 10px; margin-bottom: 5px; border: 2px solid #fff; box-shadow: 0 4px 6px var(--3d-shadow); }
        
        .bg-work { background: #ff4d4d; } 
        .bg-off { background: #28a745; } 
        .bg-vacation { background: #ffc107; }
        .bg-clear { background: #888; }

        .view-container { display: grid; gap: 25px; width: 100%; max-width: 1150px; justify-content: center; }
        .month-view { grid-template-columns: 1fr; max-width: 500px; }
        .year-view { grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); }
        
        .month-card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 1px solid #eee; height: fit-content; position: relative; }
        .month-title { text-align: center; margin-bottom: 10px; font-size: 1.3em; font-weight: 800; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; }
        .work-counter { text-align: center; font-size: 0.8em; color: #666; margin-bottom: 10px; font-weight: bold; }
        
        table { width: 100%; border-collapse: separate; border-spacing: 5px; }
        td { width: 42px; height: 42px; text-align: center; font-weight: 700; background: #fff; border: 1px solid #e0e0e0; border-radius: 10px; cursor: pointer; position: relative; transition: 0.1s; }
        td:hover:not(.empty) { filter: brightness(0.9); }
        
        .holiday-text { font-size: 0.55em; display: block; line-height: 1; font-weight: normal; margin-top: 2px; }

        .today { border: 3px solid var(--today-border) !important; box-shadow: 0 0 10px rgba(0,123,255,0.5); animation: pulse 2s infinite; z-index: 5; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .has-note::after { content: ""; position: absolute; top: 4px; right: 4px; width: 8px; height: 8px; background: #000; border-radius: 50%; border: 1px solid #fff; z-index: 2; }
        .holiday { background-color: #fff0f0 !important; color: #d32f2f !important; border: 2px solid #ffcdd2 !important; }
        
        .work { background: #ff4d4d !important; color: white !important; }
        .day-off { background: #28a745 !important; color: white !important; }
        .vacation { background: #ffc107 !important; color: black !important; }
        .empty { border: none !important; background: transparent !important; cursor: default; }

        .notes-list-panel { background: white; width: 100%; max-width: 1000px; margin-top: 30px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); border-left: 8px solid #333; }
        .note-item { display: grid; grid-template-columns: 140px 1fr; gap: 15px; padding: 12px; border-bottom: 1px solid #eee; align-items: center; }
        .note-date { font-weight: 800; color: var(--primary); }
        .holiday-note { color: #d32f2f; font-style: italic; font-weight: bold; }
        .smƒõna-info { font-size: 0.9em; color: #555; background: #eee; padding: 2px 6px; border-radius: 4px; margin-left: 10px; }
        
        .save-panel { background: #e8f4fd; padding: 20px; border-radius: 15px; margin-top: 20px; width: 100%; max-width: 1000px; text-align: center; display: flex; flex-direction: column; gap: 10px; align-items: center; }
        .btn { border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; font-family: inherit; }
        .btn-nav { background: var(--primary); color: white; }
        .btn-green { background: #28a745; color: white; box-shadow: 0 4px 0 #1e7e34; }
        .btn-blue { background: #007BFF; color: white; box-shadow: 0 4px 0 #0056b3; }
        .btn-red { background: #dc3545; color: white; }
    </style>
</head>
<body onmouseup="stopDrawing()" onmouseleave="stopDrawing()">

    <div class="controls-panel">
        <div class="nav-section">
            <button class="btn btn-nav" onclick="navigate(-1)">‚ùÆ</button>
            <span id="displayLabel" class="display-label">2026</span>
            <button class="btn btn-nav" onclick="navigate(1)">‚ùØ</button>
        </div>
        <div class="tools">
            <div class="tool active" id="tool-work" onclick="setTool('work', this)"><div class="dot bg-work"></div>Pr√°ce</div>
            <div class="tool" onclick="setTool('day-off', this)"><div class="dot bg-off"></div>Volno</div>
            <div class="tool" onclick="setTool('vacation', this)"><div class="dot bg-vacation"></div>Dovolen√°</div>
            <div class="tool" onclick="setTool('clear', this)"><div class="dot bg-clear"></div>Smazat</div>
        </div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button class="btn" style="background:#6c757d; color:white;" id="viewToggle" onclick="toggleView()">Mƒõs√≠ƒçn√≠ pohled</button>
            <button class="btn btn-red" onclick="window.print()">Tisk / PDF</button>
        </div>
    </div>

    <div id="calendarContainer" class="view-container year-view"></div>

    <div class="notes-list-panel">
        <h2 style="margin-top:0;">üìù Pozn√°mky a sv√°tky 2026</h2>
        <div id="notesContainer"></div>
    </div>

    <div class="save-panel">
        <button class="btn btn-blue" onclick="copyCodeToClipboard()">ZKOP√çROVAT K√ìD PRO GITHUB</button>
        <span id="copyStatus" style="font-size: 0.9em; color: #28a745; font-weight: bold;"></span>
        <button class="btn btn-green" onclick="saveToDisk()">ST√ÅHNOUT JAKO SOUBOR</button>
    </div>

    <script id="embeddedData" type="application/json">{"d-2026-0-9":"day-off","d-2026-0-10":"day-off","d-2026-0-11":"day-off","d-2026-0-12":"day-off","d-2026-0-13":"work","d-2026-0-14":"work","d-2026-0-15":"work","d-2026-0-16":"work","d-2026-0-17":"work","d-2026-0-18":"work","d-2026-0-19":"work","d-2026-0-20":"work","d-2026-0-21":"day-off","d-2026-0-22":"day-off","d-2026-0-23":"day-off","d-2026-0-24":"day-off","d-2026-0-25":"day-off","d-2026-0-26":"day-off","d-2026-0-27":"work","d-2026-0-28":"work","d-2026-0-29":"work","d-2026-0-30":"work","d-2026-0-31":"work","d-2026-1-2":"work","d-2026-1-3":"work","d-2026-1-4":"day-off","d-2026-1-1":"work","d-2026-1-5":"day-off","d-2026-1-6":"day-off","d-2026-1-7":"day-off","d-2026-1-8":"day-off","d-2026-1-9":"day-off","d-2026-1-10":"work","d-2026-1-11":"work","d-2026-1-12":"work","d-2026-1-13":"work","d-2026-1-14":"work","d-2026-1-15":"work","d-2026-1-16":"work","d-2026-1-17":"work","d-2026-1-18":"day-off","d-2026-1-19":"day-off","d-2026-1-20":"day-off","d-2026-1-21":"day-off","d-2026-1-22":"day-off","d-2026-1-23":"day-off","d-2026-1-24":"work","d-2026-1-25":"work","d-2026-1-26":"work","d-2026-1-27":"work","d-2026-1-28":"work","d-2026-2-1":"work","d-2026-2-2":"work","d-2026-2-3":"work","d-2026-2-4":"day-off","d-2026-2-5":"day-off","d-2026-2-6":"day-off","d-2026-2-7":"day-off","d-2026-2-8":"day-off","d-2026-2-9":"day-off","d-2026-2-10":"work","d-2026-2-11":"work","d-2026-2-12":"work","d-2026-2-13":"work","d-2026-2-14":"work","d-2026-2-15":"work","d-2026-2-16":"work","d-2026-2-17":"work","d-2026-2-18":"day-off","d-2026-2-19":"day-off","d-2026-2-20":"day-off","d-2026-2-21":"day-off","d-2026-2-22":"day-off","d-2026-2-23":"day-off","d-2026-2-24":"work","d-2026-2-25":"work","d-2026-2-26":"work","d-2026-2-27":"work","d-2026-2-28":"work","d-2026-3-1":"day-off","d-2026-3-2":"day-off","d-2026-3-3":"day-off","d-2026-3-4":"day-off","d-2026-3-5":"day-off","d-2026-3-6":"day-off","d-2026-3-7":"work","d-2026-3-8":"work","d-2026-3-9":"work","d-2026-3-10":"work","d-2026-3-11":"work","d-2026-3-12":"work","d-2026-3-13":"work","d-2026-3-14":"work","d-2026-3-15":"day-off","d-2026-3-16":"day-off","d-2026-3-17":"day-off","d-2026-3-18":"day-off","d-2026-3-19":"day-off","d-2026-3-20":"day-off","d-2026-3-21":"work","d-2026-3-22":"work","d-2026-3-23":"work","d-2026-3-24":"work","d-2026-3-25":"work","d-2026-3-26":"work","d-2026-3-27":"work","d-2026-3-28":"work","d-2026-3-29":"day-off","d-2026-3-30":"day-off","d-2026-3-31":"day-off","d-2026-4-1":"day-off","d-2026-4-2":"day-off","d-2026-4-3":"day-off","note-d-2026-0-9":"krev Semily objednat srdce, objednat ocn√≠"}</script>

    <script>
        let storage = {};
        try { storage = JSON.parse(document.getElementById('embeddedData').textContent || '{}'); } catch(e) { storage = {}; }

        let currentDate = new Date(2026, 0, 1);
        let currentTool = 'work';
        let isDrawing = false;
        let isYearView = true;
        const months = ['Leden', '√önor', 'B≈ôezen', 'Duben', 'Kvƒõten', 'ƒåerven', 'ƒåervenec', 'Srpen', 'Z√°≈ô√≠', '≈ò√≠jen', 'Listopad', 'Prosinec'];
        const holidays = {"1-0": "Nov√Ω rok", "3-3": "Velk√Ω p√°tek", "6-3": "Velikonoce", "1-4": "Sv√°tek pr√°ce", "8-4": "Den v√≠tƒõzstv√≠", "5-6": "Vƒõrozvƒõsti", "6-6": "Jan Hus", "28-8": "St√°tnost", "28-9": "Vznik ƒåSR", "17-10": "Svoboda", "24-11": "≈†tƒõdr√Ω den", "25-11": "1. sv√°tek", "26-11": "2. sv√°tek"};
        const toolNames = { "work": "Pr√°ce", "day-off": "Volno", "vacation": "Dovolen√°" };

        function setTool(tool, element) {
            currentTool = tool;
            document.querySelectorAll('.tool').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
        }

        function stopDrawing() { isDrawing = false; }
        function navigate(step) { if (isYearView) currentDate.setFullYear(currentDate.getFullYear() + step); else currentDate.setMonth(currentDate.getMonth() + step); render(); }
        function toggleView() { isYearView = !isYearView; document.getElementById('calendarContainer').className = isYearView ? "view-container year-view" : "view-container month-view"; document.getElementById('viewToggle').textContent = isYearView ? "Mƒõs√≠ƒçn√≠ pohled" : "Cel√Ω rok"; render(); }

        function applyTool(cell, dayId) {
            if (currentTool === 'clear') delete storage[dayId]; else storage[dayId] = currentTool;
            render();
        }

        function addNote(e, dayId, dayNum, monthIdx, year) {
            e.preventDefault();
            const newNote = prompt(`Pozn√°mka ${dayNum}. ${months[monthIdx]}:`, storage["note-" + dayId] || "");
            if (newNote === null) return;
            if (newNote.trim() === "") delete storage["note-" + dayId]; else storage["note-" + dayId] = newNote;
            render();
        }

        function createMonthHTML(year, mIdx) {
            const card = document.createElement('div');
            card.className = 'month-card';
            const workDays = Object.keys(storage).filter(k => k.startsWith(`d-${year}-${mIdx}-`) && storage[k] === 'work').length;
            card.innerHTML = `<h3 class="month-title">${months[mIdx]} ${year}</h3><div class="work-counter">Smƒõn: ${workDays}</div>`;
            const table = document.createElement('table');
            table.innerHTML = `<thead><tr><th>Po</th><th>√öt</th><th>St</th><th>ƒåt</th><th>P√°</th><th>So</th><th>Ne</th></tr></thead>`;
            const tbody = document.createElement('tbody');
            let start = (new Date(year, mIdx, 1).getDay() || 7) - 1;
            let days = new Date(year, mIdx + 1, 0).getDate();
            let d = 1;
            for (let r = 0; r < 6; r++) {
                const tr = document.createElement('tr');
                for (let c = 0; c < 7; c++) {
                    const cell = document.createElement('td');
                    if ((r === 0 && c < start) || d > days) { cell.className = 'empty'; } 
                    else {
                        const dayId = `d-${year}-${mIdx}-${d}`;
                        const hol = holidays[`${d}-${mIdx}`];
                        cell.innerHTML = `<span>${d}</span>${hol ? `<span class="holiday-text">${hol}</span>` : ''}`;
                        if (storage[dayId]) cell.className = storage[dayId];
                        if (hol && year === 2026) cell.classList.add('holiday');
                        if (storage["note-" + dayId]) cell.classList.add('has-note');
                        const currentD = d;
                        cell.onmousedown = (e) => { if(e.button === 0) { isDrawing = true; applyTool(cell, dayId); } };
                        cell.onmouseenter = () => { if(isDrawing) applyTool(cell, dayId); };
                        cell.oncontextmenu = (e) => addNote(e, dayId, currentD, mIdx, year);
                        d++;
                    }
                    tr.appendChild(cell);
                }
                tbody.appendChild(tr); if (d > days) break;
            }
            table.appendChild(tbody); card.appendChild(table); return card;
        }

        function render() {
            const container = document.getElementById('calendarContainer');
            const notesCont = document.getElementById('notesContainer');
            container.innerHTML = ''; notesCont.innerHTML = '';
            const y = currentDate.getFullYear();
            document.getElementById('displayLabel').textContent = isYearView ? y : months[currentDate.getMonth()] + " " + y;
            const toShow = isYearView ? [0,1,2,3,4,5,6,7,8,9,10,11] : [currentDate.getMonth()];
            toShow.forEach(idx => container.appendChild(createMonthHTML(y, idx)));

            const items = [];
            if (y === 2026) Object.keys(holidays).forEach(h => {
                const [d, m] = h.split('-').map(Number);
                const shift = storage[`d-2026-${m}-${d}`] ? toolNames[storage[`d-2026-${m}-${d}`]] : "Volno/Neuvedeno";
                items.push({ date: new Date(2026, m, d), text: `${holidays[h]} (M√°te: ${shift})`, isH: true });
            });
            Object.keys(storage).filter(k => k.startsWith('note-d-')).forEach(k => {
                const p = k.split('-'); items.push({ date: new Date(p[2], p[3], p[4]), text: storage[k], isH: false });
            });
            items.sort((a,b) => a.date - b.date).forEach(item => {
                const div = document.createElement('div'); div.className = 'note-item';
                div.innerHTML = `<span class="note-date">${item.date.getDate()}. ${months[item.date.getMonth()]}</span><span class="${item.isH ? 'holiday-note' : ''}">${item.text}</span>`;
                notesCont.appendChild(div);
            });
        }

        function generateHTML() {
            const data = JSON.stringify(storage);
            let html = document.documentElement.outerHTML;
            return '<!DOCTYPE html>\n' + html.replace(/<script id="embeddedData".*?<\/script>/s, `<script id="embeddedData" type="application\/json">${data}<\/script>`);
        }

        function copyCodeToClipboard() {
            navigator.clipboard.writeText(generateHTML()).then(() => {
                const s = document.getElementById('copyStatus'); s.textContent = "ZKOP√çROV√ÅNO! Nyn√≠ vlo≈æte na GitHub.";
                setTimeout(() => s.textContent = "", 4000);
            });
        }

        function saveToDisk() {
            const blob = new Blob([generateHTML()], {type: 'text/html'});
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'planovac_2026.html'; a.click();
        }

        render();
    </script>
</body>
</html>
